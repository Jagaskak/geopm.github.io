<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>geopm: geopm::SampleRegulator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">geopm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="classgeopm.html">geopm</a></li><li class="navelem"><a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classgeopm_1_1_sample_regulator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">geopm::SampleRegulator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class merges <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> and <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> time series data.  
 <a href="classgeopm_1_1_sample_regulator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_sample_regulator_8hpp_source.html">SampleRegulator.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for geopm::SampleRegulator:</div>
<div class="dyncontent">
<div class="center"><img src="classgeopm_1_1_sample_regulator__coll__graph.png" border="0" usemap="#geopm_1_1_sample_regulator_coll__map" alt="Collaboration graph"/></div>
<map name="geopm_1_1_sample_regulator_coll__map" id="geopm_1_1_sample_regulator_coll__map">
<area shape="rect" id="node2" href="structgeopm__time__s.html" title="structure to abstract the difference between a timespec on linux or a timeval on OSX. " alt="" coords="36,5,143,32"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgeopm_1_1_sample_regulator_1_1m__rank__sample__s.html">m_rank_sample_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to hold a single rank sample.  <a href="structgeopm_1_1_sample_regulator_1_1m__rank__sample__s.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a664d4b01003bef41fb4031f7a865c190"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a664d4b01003bef41fb4031f7a865c190">SampleRegulator</a> (const std::vector&lt; int &gt; &amp;cpu_rank)</td></tr>
<tr class="memdesc:a664d4b01003bef41fb4031f7a865c190"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> constructor.  <a href="#a664d4b01003bef41fb4031f7a865c190">More...</a><br/></td></tr>
<tr class="separator:a664d4b01003bef41fb4031f7a865c190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac64ebb52d6c03f8226c413da0c2becdb"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#ac64ebb52d6c03f8226c413da0c2becdb">~SampleRegulator</a> ()</td></tr>
<tr class="memdesc:ac64ebb52d6c03f8226c413da0c2becdb"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> destructor, virtual.  <a href="#ac64ebb52d6c03f8226c413da0c2becdb">More...</a><br/></td></tr>
<tr class="separator:ac64ebb52d6c03f8226c413da0c2becdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45a1324a99b0ba3479f00a3eed136d5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a45a1324a99b0ba3479f00a3eed136d5f">operator()</a> (const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;platform_sample_time, std::vector&lt; double &gt;::const_iterator platform_sample_begin, std::vector&lt; double &gt;::const_iterator platform_sample_end, std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_begin, std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_end, std::vector&lt; double &gt; &amp;aligned_signal, std::vector&lt; uint64_t &gt; &amp;region_id)</td></tr>
<tr class="memdesc:a45a1324a99b0ba3479f00a3eed136d5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The parenthesis operator which implements the <a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> functor.  <a href="#a45a1324a99b0ba3479f00a3eed136d5f">More...</a><br/></td></tr>
<tr class="separator:a45a1324a99b0ba3479f00a3eed136d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85180b5bdb562a4604662e67b5f84b31"><td class="memItemLeft" align="right" valign="top">const std::map&lt; int, int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a85180b5bdb562a4604662e67b5f84b31">rank_idx_map</a> (void) const </td></tr>
<tr class="separator:a85180b5bdb562a4604662e67b5f84b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:acb9f421a378b2b9e267ad54580773c73"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#acb9f421a378b2b9e267ad54580773c73">m_num_rank_signal_e</a> { <a class="el" href="classgeopm_1_1_sample_regulator.html#acb9f421a378b2b9e267ad54580773c73a304a7dfa6c43eb103ece54dab4a35010">M_NUM_RANK_SIGNAL</a> = 2
 }</td></tr>
<tr class="separator:acb9f421a378b2b9e267ad54580773c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb2277d76c1c3ab60f7e3a228e08d370"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#acb2277d76c1c3ab60f7e3a228e08d370">m_interp_type_e</a> { <a class="el" href="classgeopm_1_1_sample_regulator.html#acb2277d76c1c3ab60f7e3a228e08d370afdbf1e643984e10e78079428e213f469">M_INTERP_TYPE_NONE</a> = 0, 
<a class="el" href="classgeopm_1_1_sample_regulator.html#acb2277d76c1c3ab60f7e3a228e08d370a0f5d1986ecc2bc80e2f34b689ed837cc">M_INTERP_TYPE_NEAREST</a> = 1, 
<a class="el" href="classgeopm_1_1_sample_regulator.html#acb2277d76c1c3ab60f7e3a228e08d370a2184e0073ee5dd297730cb4aa350f623">M_INTERP_TYPE_LINEAR</a> = 2
 }</td></tr>
<tr class="separator:acb2277d76c1c3ab60f7e3a228e08d370"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa4418ca1ff91866ede5a2764b8c262ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#aa4418ca1ff91866ede5a2764b8c262ee">insert</a> (std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_begin, std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_end)</td></tr>
<tr class="memdesc:aa4418ca1ff91866ede5a2764b8c262ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data.  <a href="#aa4418ca1ff91866ede5a2764b8c262ee">More...</a><br/></td></tr>
<tr class="separator:aa4418ca1ff91866ede5a2764b8c262ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d76ee0839a92002369f34b579e994fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a5d76ee0839a92002369f34b579e994fe">insert</a> (std::vector&lt; double &gt;::const_iterator platform_sample_begin, std::vector&lt; double &gt;::const_iterator platform_sample_end)</td></tr>
<tr class="memdesc:a5d76ee0839a92002369f34b579e994fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> data.  <a href="#a5d76ee0839a92002369f34b579e994fe">More...</a><br/></td></tr>
<tr class="separator:a5d76ee0839a92002369f34b579e994fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23064c675c590bb85188feb72551456f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a23064c675c590bb85188feb72551456f">align</a> (const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;timestamp)</td></tr>
<tr class="memdesc:a23064c675c590bb85188feb72551456f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Align <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data to the time the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> data was collected.  <a href="#a23064c675c590bb85188feb72551456f">More...</a><br/></td></tr>
<tr class="separator:a23064c675c590bb85188feb72551456f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a787bb75f8db58fdbba0fcae224e12ad6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a787bb75f8db58fdbba0fcae224e12ad6">m_num_rank</a></td></tr>
<tr class="memdesc:a787bb75f8db58fdbba0fcae224e12ad6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of MPI ranks on the node under control.  <a href="#a787bb75f8db58fdbba0fcae224e12ad6">More...</a><br/></td></tr>
<tr class="separator:a787bb75f8db58fdbba0fcae224e12ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ca8298214f43bd41edb14d7255a7a02"><td class="memItemLeft" align="right" valign="top">std::map&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a1ca8298214f43bd41edb14d7255a7a02">m_rank_idx_map</a></td></tr>
<tr class="memdesc:a1ca8298214f43bd41edb14d7255a7a02"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map from the MPI rank reported in the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data to the node local rank index.  <a href="#a1ca8298214f43bd41edb14d7255a7a02">More...</a><br/></td></tr>
<tr class="separator:a1ca8298214f43bd41edb14d7255a7a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac64a02404deaade860cd5ba19576fa98"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#ac64a02404deaade860cd5ba19576fa98">m_region_id</a></td></tr>
<tr class="memdesc:ac64a02404deaade860cd5ba19576fa98"><td class="mdescLeft">&#160;</td><td class="mdescRight">The region_id of the stored <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data used for interpolation.  <a href="#ac64a02404deaade860cd5ba19576fa98">More...</a><br/></td></tr>
<tr class="separator:ac64a02404deaade860cd5ba19576fa98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30e84b5a7433285c7c527da62416d0d2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; CircularBuffer<br class="typebreak"/>
&lt; struct <a class="el" href="structgeopm_1_1_sample_regulator_1_1m__rank__sample__s.html">m_rank_sample_s</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a30e84b5a7433285c7c527da62416d0d2">m_rank_sample_prev</a></td></tr>
<tr class="memdesc:a30e84b5a7433285c7c527da62416d0d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per rank record of last profile samples in m_region_id_prev.  <a href="#a30e84b5a7433285c7c527da62416d0d2">More...</a><br/></td></tr>
<tr class="separator:a30e84b5a7433285c7c527da62416d0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa820f0c93fe3e8eeae964d580881c28a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#aa820f0c93fe3e8eeae964d580881c28a">m_aligned_time</a></td></tr>
<tr class="memdesc:aa820f0c93fe3e8eeae964d580881c28a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The platform sample time.  <a href="#aa820f0c93fe3e8eeae964d580881c28a">More...</a><br/></td></tr>
<tr class="separator:aa820f0c93fe3e8eeae964d580881c28a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb4a872fa7cd4ef8b1372ba631386774"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#acb4a872fa7cd4ef8b1372ba631386774">m_aligned_signal</a></td></tr>
<tr class="memdesc:acb4a872fa7cd4ef8b1372ba631386774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector to multiply with signal_domain_matrix to project into control domains.  <a href="#acb4a872fa7cd4ef8b1372ba631386774">More...</a><br/></td></tr>
<tr class="separator:acb4a872fa7cd4ef8b1372ba631386774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8249d3e7653d8e2e5b4dd72e13b80739"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_sample_regulator.html#a8249d3e7653d8e2e5b4dd72e13b80739">m_num_platform_signal</a></td></tr>
<tr class="separator:a8249d3e7653d8e2e5b4dd72e13b80739"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class merges <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> and <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> time series data. </p>
<p>The <a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> class is a functor used by the <a class="el" href="classgeopm_1_1_controller.html" title="Class used to launch or step the global extensible open power manager algorithm. ">Controller</a> to create coherent samples while merging data collected from the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> and the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a>. The <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> progress and runtime data is collected asynchronously by each MPI rank whenever the application MPI ranks use the <a class="el" href="classgeopm_1_1_profile.html" title="Enables application profiling and application feedback to the control algorithm. ">Profile</a> interface. The <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> sample comprises a vector of doubles collected synchronously. The cadence of the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> samples is determined by the <a class="el" href="classgeopm_1_1_controller.html" title="Class used to launch or step the global extensible open power manager algorithm. ">Controller</a>. The application progress and runtime data for the region are written some time prior to the collection of the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> sample and each have an associated time stamp. The <a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> extrapolates the application provided progress and runtime for each MPI rank to the time when the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> was sampled. The extrapolated application data is then bundled with the hardware data. This bundled data is transformed into a basis that linearly combines measurements of the same metric so that the combination is representative of the given metric for each domain of control. This transformation matrix is an input which is provided by the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a>.</p>
<p>The class is a functor and has only one public member function, the operator (). This class has been separated from the <a class="el" href="classgeopm_1_1_controller.html" title="Class used to launch or step the global extensible open power manager algorithm. ">Controller</a> to encapsulate this one operation and facilitate independent testing of this feature. The operator () method is broken down into four steps, each represented by a private method, this enables individual testing of each step. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="acb2277d76c1c3ab60f7e3a228e08d370"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classgeopm_1_1_sample_regulator.html#acb2277d76c1c3ab60f7e3a228e08d370">geopm::SampleRegulator::m_interp_type_e</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="acb2277d76c1c3ab60f7e3a228e08d370afdbf1e643984e10e78079428e213f469"></a>M_INTERP_TYPE_NONE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="acb2277d76c1c3ab60f7e3a228e08d370a0f5d1986ecc2bc80e2f34b689ed837cc"></a>M_INTERP_TYPE_NEAREST</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="acb2277d76c1c3ab60f7e3a228e08d370a2184e0073ee5dd297730cb4aa350f623"></a>M_INTERP_TYPE_LINEAR</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="acb9f421a378b2b9e267ad54580773c73"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classgeopm_1_1_sample_regulator.html#acb9f421a378b2b9e267ad54580773c73">geopm::SampleRegulator::m_num_rank_signal_e</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="acb9f421a378b2b9e267ad54580773c73a304a7dfa6c43eb103ece54dab4a35010"></a>M_NUM_RANK_SIGNAL</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a664d4b01003bef41fb4031f7a865c190"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">geopm::SampleRegulator::SampleRegulator </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>cpu_rank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> constructor. </p>
<p>Creates data structures used for mapping rank reported in the profile message to the node local rank which is used to index intermediate vectors used in the computation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cpu_rank</td><td>A vector of length total number of CPUs which gives the MPI rank running on each CPU. Note that each rank may run on multiple CPUs but it is assumed that each CPU is allocated to a specific MPI rank. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac64ebb52d6c03f8226c413da0c2becdb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geopm::SampleRegulator::~SampleRegulator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> destructor, virtual. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a23064c675c590bb85188feb72551456f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::SampleRegulator::align </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;&#160;</td>
          <td class="paramname"><em>timestamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Align <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data to the time the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> data was collected. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>runtime is not set by application, this is uninitialized memory </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>runtime is not set by application, this is uninitialized memory </dd></dl>

</div>
</div>
<a class="anchor" id="aa4418ca1ff91866ede5a2764b8c262ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::SampleRegulator::insert </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data. </p>

</div>
</div>
<a class="anchor" id="a5d76ee0839a92002369f34b579e994fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::SampleRegulator::insert </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> data. </p>

</div>
</div>
<a class="anchor" id="a45a1324a99b0ba3479f00a3eed136d5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void geopm::SampleRegulator::operator() </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;&#160;</td>
          <td class="paramname"><em>platform_sample_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>aligned_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>region_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The parenthesis operator which implements the <a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> functor. </p>
<p>This operator implements the public functionality of the <a class="el" href="classgeopm_1_1_sample_regulator.html" title="Class merges Platform and Profile time series data. ">SampleRegulator</a> class, see class description for more details. In short, the data from the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> object is bundled with extrapolated <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data and transformed to describe the domains of control.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_time</td><td>The time when the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> was sampled which is the time that the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data is extrapolated to.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal_domain_matrix</td><td>Matrix used to transform the extrapolated data to model the domains of control. This matrix is provided by the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a>. See the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> for more information.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_begin</td><td>A vector iterator referencing the beginning of the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_end</td><td>A vector iterator referencing the end of the <a class="el" href="classgeopm_1_1_platform.html" title="This class provides an abstraction of specific functionality and attributes of classes of hardware im...">Platform</a> sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prof_sample_begin</td><td>A vector iterator referencing the beginning of the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prof_sample_end</td><td>A vector iterator referencing the end of the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> sample data.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">telemetry</td><td>A vector of <a class="el" href="structgeopm__telemetry__message__s.html" title="Structure used to hold aligned telemetry data from application profiling and msr data. ">geopm_telemetry_message_s</a> structures which are in the order of the domains of control defined in a <a class="el" href="classgeopm_1_1_policy.html" title="Class defines the per-domain power settings and policy state. ">Policy</a> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a85180b5bdb562a4604662e67b5f84b31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::map&lt; int, int &gt; &amp; geopm::SampleRegulator::rank_idx_map </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="acb4a872fa7cd4ef8b1372ba631386774"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; geopm::SampleRegulator::m_aligned_signal</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector to multiply with signal_domain_matrix to project into control domains. </p>

</div>
</div>
<a class="anchor" id="aa820f0c93fe3e8eeae964d580881c28a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> geopm::SampleRegulator::m_aligned_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The platform sample time. </p>

</div>
</div>
<a class="anchor" id="a8249d3e7653d8e2e5b4dd72e13b80739"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t geopm::SampleRegulator::m_num_platform_signal</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a787bb75f8db58fdbba0fcae224e12ad6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int geopm::SampleRegulator::m_num_rank</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of MPI ranks on the node under control. </p>

</div>
</div>
<a class="anchor" id="a1ca8298214f43bd41edb14d7255a7a02"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int, int&gt; geopm::SampleRegulator::m_rank_idx_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A map from the MPI rank reported in the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data to the node local rank index. </p>

</div>
</div>
<a class="anchor" id="a30e84b5a7433285c7c527da62416d0d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;CircularBuffer&lt;struct <a class="el" href="structgeopm_1_1_sample_regulator_1_1m__rank__sample__s.html">m_rank_sample_s</a>&gt; &gt; geopm::SampleRegulator::m_rank_sample_prev</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Per rank record of last profile samples in m_region_id_prev. </p>

</div>
</div>
<a class="anchor" id="ac64a02404deaade860cd5ba19576fa98"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;uint64_t&gt; geopm::SampleRegulator::m_region_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The region_id of the stored <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data used for interpolation. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_sample_regulator_8hpp_source.html">SampleRegulator.hpp</a></li>
<li>src/<a class="el" href="_sample_regulator_8cpp.html">SampleRegulator.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
