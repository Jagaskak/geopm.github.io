<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>geopm: geopm::ISampleRegulator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">geopm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeopm.html">geopm</a></li><li class="navelem"><a class="el" href="classgeopm_1_1_i_sample_regulator.html">ISampleRegulator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgeopm_1_1_i_sample_regulator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">geopm::ISampleRegulator Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class merges <a class="el" href="classgeopm_1_1_platform.html">Platform</a> and <a class="el" href="classgeopm_1_1_profile.html">Profile</a> time series data.  
 <a href="classgeopm_1_1_i_sample_regulator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_sample_regulator_8hpp_source.html">SampleRegulator.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for geopm::ISampleRegulator:</div>
<div class="dyncontent">
<div class="center"><img src="classgeopm_1_1_i_sample_regulator__inherit__graph.png" border="0" usemap="#geopm_1_1_i_sample_regulator_inherit__map" alt="Inheritance graph"/></div>
<map name="geopm_1_1_i_sample_regulator_inherit__map" id="geopm_1_1_i_sample_regulator_inherit__map">
<area shape="rect" id="node2" href="classgeopm_1_1_sample_regulator.html" title="geopm::SampleRegulator" alt="" coords="7,79,180,104"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a02f243075da2c78976c710cf5d9e65da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a02f243075da2c78976c710cf5d9e65da">ISampleRegulator</a> ()</td></tr>
<tr class="separator:a02f243075da2c78976c710cf5d9e65da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a047dd0b4adbb814e835dbb4c45b9abf9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a047dd0b4adbb814e835dbb4c45b9abf9">ISampleRegulator</a> (const <a class="el" href="classgeopm_1_1_i_sample_regulator.html">ISampleRegulator</a> &amp;other)</td></tr>
<tr class="separator:a047dd0b4adbb814e835dbb4c45b9abf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63920e5a9a2f014a03ef7dcfe859c71e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a63920e5a9a2f014a03ef7dcfe859c71e">~ISampleRegulator</a> ()</td></tr>
<tr class="separator:a63920e5a9a2f014a03ef7dcfe859c71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa80ea68a4c99aecb6e3bdd161632d242"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#aa80ea68a4c99aecb6e3bdd161632d242">operator()</a> (const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;platform_sample_time, std::vector&lt; double &gt;::const_iterator platform_sample_begin, std::vector&lt; double &gt;::const_iterator platform_sample_end, std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_begin, std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator prof_sample_end, std::vector&lt; double &gt; &amp;aligned_signal, std::vector&lt; uint64_t &gt; &amp;region_id)=0</td></tr>
<tr class="memdesc:aa80ea68a4c99aecb6e3bdd161632d242"><td class="mdescLeft">&#160;</td><td class="mdescRight">The parenthesis operator which implements the <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> functor.  <a href="#aa80ea68a4c99aecb6e3bdd161632d242">More...</a><br /></td></tr>
<tr class="separator:aa80ea68a4c99aecb6e3bdd161632d242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a667b3b7876dd4acadeb3175f608d656d"><td class="memItemLeft" align="right" valign="top">virtual const std::map&lt; int, int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_i_sample_regulator.html#a667b3b7876dd4acadeb3175f608d656d">rank_idx_map</a> (void) const  =0</td></tr>
<tr class="separator:a667b3b7876dd4acadeb3175f608d656d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class merges <a class="el" href="classgeopm_1_1_platform.html">Platform</a> and <a class="el" href="classgeopm_1_1_profile.html">Profile</a> time series data. </p>
<p>The <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> class is a functor used by the <a class="el" href="classgeopm_1_1_controller.html" title="Class used to launch or step the global extensible open power manager algorithm. ">Controller</a> to create coherent samples while merging data collected from the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> and the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a>. The <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> progress and runtime data is collected asynchronously by each MPI rank whenever the application MPI ranks use the <a class="el" href="classgeopm_1_1_profile.html">Profile</a> interface. The <a class="el" href="classgeopm_1_1_platform.html">Platform</a> sample comprises a vector of doubles collected synchronously. The cadence of the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> samples is determined by the <a class="el" href="classgeopm_1_1_controller.html" title="Class used to launch or step the global extensible open power manager algorithm. ">Controller</a>. The application progress and runtime data for the region are written some time prior to the collection of the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> sample and each have an associated time stamp. The <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> extrapolates the application provided progress and runtime for each MPI rank to the time when the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> was sampled. The extrapolated application data is then bundled with the hardware data. This bundled data is transformed into a basis that linearly combines measurements of the same metric so that the combination is representative of the given metric for each domain of control. This transformation matrix is an input which is provided by the <a class="el" href="classgeopm_1_1_platform.html">Platform</a>.</p>
<p>The class is a functor and has only one public member function, the operator (). This class has been separated from the <a class="el" href="classgeopm_1_1_controller.html" title="Class used to launch or step the global extensible open power manager algorithm. ">Controller</a> to encapsulate this one operation and facilitate independent testing of this feature. The operator () method is broken down into four steps, each represented by a private method, this enables individual testing of each step. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a02f243075da2c78976c710cf5d9e65da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geopm::ISampleRegulator::ISampleRegulator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a047dd0b4adbb814e835dbb4c45b9abf9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">geopm::ISampleRegulator::ISampleRegulator </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgeopm_1_1_i_sample_regulator.html">ISampleRegulator</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a63920e5a9a2f014a03ef7dcfe859c71e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual geopm::ISampleRegulator::~ISampleRegulator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa80ea68a4c99aecb6e3bdd161632d242"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void geopm::ISampleRegulator::operator() </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structgeopm__time__s.html">geopm_time_s</a> &amp;&#160;</td>
          <td class="paramname"><em>platform_sample_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>platform_sample_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::pair&lt; uint64_t, struct <a class="el" href="structgeopm__prof__message__s.html">geopm_prof_message_s</a> &gt; &gt;::const_iterator&#160;</td>
          <td class="paramname"><em>prof_sample_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>aligned_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; uint64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>region_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The parenthesis operator which implements the <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> functor. </p>
<p>This operator implements the public functionality of the <a class="el" href="classgeopm_1_1_sample_regulator.html">SampleRegulator</a> class, see class description for more details. In short, the data from the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> object is bundled with extrapolated <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data and transformed to describe the domains of control.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_time</td><td>The time when the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> was sampled which is the time that the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> data is extrapolated to.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signal_domain_matrix</td><td>Matrix used to transform the extrapolated data to model the domains of control. This matrix is provided by the <a class="el" href="classgeopm_1_1_platform.html">Platform</a>. See the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> for more information.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_begin</td><td>A vector iterator referencing the beginning of the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">platform_sample_end</td><td>A vector iterator referencing the end of the <a class="el" href="classgeopm_1_1_platform.html">Platform</a> sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prof_sample_begin</td><td>A vector iterator referencing the beginning of the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> sample data.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prof_sample_end</td><td>A vector iterator referencing the end of the <a class="el" href="classgeopm_1_1_profile_sampler.html" title="Retrieves sample data from the set of application ranks on a single node. ">ProfileSampler</a> sample data.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">telemetry</td><td>A vector of <a class="el" href="structgeopm__telemetry__message__s.html" title="Structure used to hold aligned telemetry data from application profiling and msr data. ">geopm_telemetry_message_s</a> structures which are in the order of the domains of control defined in a <a class="el" href="classgeopm_1_1_policy.html">Policy</a> object. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classgeopm_1_1_sample_regulator.html#a45a1324a99b0ba3479f00a3eed136d5f">geopm::SampleRegulator</a>.</p>

</div>
</div>
<a class="anchor" id="a667b3b7876dd4acadeb3175f608d656d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::map&lt;int, int&gt;&amp; geopm::ISampleRegulator::rank_idx_map </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classgeopm_1_1_sample_regulator.html#a85180b5bdb562a4604662e67b5f84b31">geopm::SampleRegulator</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="_sample_regulator_8hpp_source.html">SampleRegulator.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
